<!DOCTYPE html>
<html lang="en-US">

<head>
   <title>Python - Sending Email using SMTP - Tutorialspoint</title>
   <meta charset="utf-8">
   <meta name="description"
      content="Python - Sending Email using SMTP - Simple Mail Transfer Protocol (SMTP) is a protocol, which handles sending e-mail and routing e-mail between mail servers." />
   <meta name="keywords"
      content="C, C++, Python, Java, HTML, CSS, JavaScript, SQL, PHP, jQuery, XML, DOM, Bootstrap, Programming, examples, code" />
   <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes">
   <link rel="stylesheet" href="../style.css">
   <script src="../script.js"></script>
</head>

<body>
   <header id="header">
      <!-- Top main-menu Starts Here -->
      <div class="mui-appbar mui-container-fulid mui--appbar-line-height mui--z1" id="logo-menu">
         <div class="mui-container">
            <div class="left-menu">
               <img class="tp-logo" alt="tutorialspoint" src="../images/logo.png">
               <div class="mui-dropdown">
                  <a class="mui-btn mui-btn--primary categories" data-mui-toggle="dropdown">
                     <i class="fa fa-th-large"></i>
                     <span> Python Tutorial <span class="mui-caret"></span></span>
                  </a>
                  <ul class="mui-dropdown__menu cat-menu">
                     <li>
                        <ul>
                           <li><a target="_top" href="index.html">01 : Home</a></li>
                           <li><a target="_top" href="python_overview.html">02 : Overview</a></li>
                           <li><a target="_top" href="python_environment.html">03 : Environment Setup</a></li>
                           <li><a target="_top" href="python_basic_syntax.html">04 : Basic Syntax</a></li>
                           <li><a target="_top" href="python_variable_types.html">05 : Variable Types</a></li>
                           <li><a target="_top" href="python_basic_operators.html">06 : Basic Operators</a></li>
                           <li><a target="_top" href="python_decision_making.html">07 : Decision Making</a></li>
                           <li><a target="_top" href="python_loops.html">08 : Loops</a></li>
                           <li><a target="_top" href="python_numbers.html">09 : Numbers</a></li>
                           <li><a target="_top" href="python_strings.html">10 : Strings</a></li>
                           <li><a target="_top" href="python_lists.html">11 : Lists</a></li>
                           <li><a target="_top" href="python_tuples.html">12 : Tuples</a></li>
                           <li><a target="_top" href="python_dictionary.html">13 : Dictionary</a></li>
                           <li><a target="_top" href="python_date_time.html">14 : Date &amp; Time</a></li>
                           <li><a target="_top" href="python_functions.html">15 : Functions</a></li>
                           <li><a target="_top" href="python_modules.html">16 : Modules</a></li>
                           <li><a target="_top" href="python_files_io.html">17 : Files I/O</a></li>
                           <li><a target="_top" href="python_exceptions.html">18 : Exceptions</a></li>
                           <li><a target="_top" href="python_classes_objects.html">19 : Classes/Objects</a></li>
                           <li><a target="_top" href="python_reg_expressions.html">20 : Reg Expressions</a></li>
                           <li><a target="_top" href="python_cgi_programming.html">21 : CGI Programming</a></li>
                           <li><a target="_top" href="python_database_access.html">22 : Database Access</a></li>
                           <li><a target="_top" href="python_networking.html">23 : Networking</a></li>
                           <li><a target="_top" href="python_sending_email.html">24 : Sending Email</a></li>
                           <li><a target="_top" href="python_multithreading.html">25 : Multithreading</a></li>
                           <li><a target="_top" href="python_xml_processing.html">26 : XML Processing</a></li>
                           <li><a target="_top" href="python_gui_programming.html">27 : GUI Programming</a></li>
                           <li><a target="_top" href="python_further_extensions.html">28 : Further Extensions</a></li>
                        </ul>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="right-menu">
               <a href="../index.html">
                  <button class="mui-btn mui-btn--primary mobile-menu">home</button>
               </a>
            </div>
         </div>
      </div>
      <!-- Top main-menu Ends Here jamal -->
   </header>
   <div class="mui-container-fluid content">
      <div class="mui-container">
         <!-- Tutorial Content Starts Here -->
         <div class="mui-col-md-12 tutorial-content">
            <div class="cover">
               <img class="img-responsive" src="../images/python.jpg" />
            </div>
            <h1>Python - Sending Email using SMTP</h1>
            <p>Simple Mail Transfer Protocol (SMTP) is a protocol, which handles sending e-mail and routing e-mail
               between mail servers.</p>
            <p>Python provides <b>smtplib</b> module, which defines an SMTP client session object that can be used to
               send mail to any Internet machine with an SMTP or ESMTP listener daemon.</p>
            <p>Here is a simple syntax to create one SMTP object, which can later be used to send an e-mail &minus;</p>
            <pre class="prettyprint notranslate">
import smtplib

smtpObj = smtplib.SMTP( [host [, port [, local_hostname]]] )
</pre>
            <p>Here is the detail of the parameters &minus;</p>
            <ul class="list">
               <li>
                  <p><b>host</b> &minus; This is the host running your SMTP server. You can specify IP address of the
                     host or a domain name like tutorialspoint.com. This is optional argument.</p>
               </li>
               <li>
                  <p><b>port</b> &minus; If you are providing <i>host</i> argument, then you need to specify a port,
                     where SMTP server is listening. Usually this port would be 25.</p>
               </li>
               <li>
                  <p><b>local_hostname</b> &minus; If your SMTP server is running on your local machine, then you can
                     specify just <i>localhost</i> as of this option.</p>
               </li>
            </ul>
            <p>An SMTP object has an instance method called <b>sendmail</b>, which is typically used to do the work of
               mailing a message. It takes three parameters &minus;</p>
            <ul class="list">
               <li>
                  <p>The <i>sender</i> &minus; A string with the address of the sender.</p>
               </li>
               <li>
                  <p>The <i>receivers</i> &minus; A list of strings, one for each recipient.</p>
               </li>
               <li>
                  <p>The <i>message</i> &minus; A message as a string formatted as specified in the various RFCs.</p>
               </li>
            </ul>
            <h2>Example</h2>
            <p>Here is a simple way to send one e-mail using Python script. Try it once &minus;</p>
            <pre class="prettyprint notranslate">
#!/usr/bin/python

import smtplib

sender = 'from@fromdomain.com'
receivers = ['to@todomain.com']

message = """From: From Person &lt;from@fromdomain.com&gt;
To: To Person &lt;to@todomain.com&gt;
Subject: SMTP e-mail test

This is a test e-mail message.
"""

try:
   smtpObj = smtplib.SMTP('localhost')
   smtpObj.sendmail(sender, receivers, message)         
   print "Successfully sent email"
except SMTPException:
   print "Error: unable to send email"
</pre>
            <p>Here, you have placed a basic e-mail in message, using a triple quote, taking care to format the headers
               correctly. An e-mail requires a <b>From</b>, <b>To</b>, and <b>Subject</b> header, separated from the
               body of the e-mail with a blank line.</p>
            <p>To send the mail you use <i>smtpObj</i> to connect to the SMTP server on the local machine and then use
               the <i>sendmail</i> method along with the message, the from address, and the destination address as
               parameters (even though the from and to addresses are within the e-mail itself, these aren't always used
               to route mail).</p>
            <p>If you are not running an SMTP server on your local machine, you can use <i>smtplib</i> client to
               communicate with a remote SMTP server. Unless you are using a webmail service (such as Hotmail or Yahoo!
               Mail), your e-mail provider must have provided you with outgoing mail server details that you can supply
               them, as follows &minus;</p>
            <pre class="result notranslate">
smtplib.SMTP('mail.your-domain.com', 25)
</pre>
            <h2>Sending an HTML e-mail using Python</h2>
            <p>When you send a text message using Python, then all the content are treated as simple text. Even if you
               include HTML tags in a text message, it is displayed as simple text and HTML tags will not be formatted
               according to HTML syntax. But Python provides option to send an HTML message as actual HTML message.</p>
            <p>While sending an e-mail message, you can specify a Mime version, content type and character set to send
               an HTML e-mail.</p>
            <h3>Example</h3>
            <p>Following is the example to send HTML content as an e-mail. Try it once &minus;</p>
            <pre class="prettyprint notranslate">
#!/usr/bin/python

import smtplib

message = """From: From Person &lt;from@fromdomain.com&gt;
To: To Person &lt;to@todomain.com&gt;
MIME-Version: 1.0
Content-type: text/html
Subject: SMTP HTML e-mail test

This is an e-mail message to be sent in HTML format

&lt;b&gt;This is HTML message.&lt;/b&gt;
&lt;h1&gt;This is headline.&lt;/h1&gt;
"""

try:
   smtpObj = smtplib.SMTP('localhost')
   smtpObj.sendmail(sender, receivers, message)         
   print "Successfully sent email"
except SMTPException:
   print "Error: unable to send email"
</pre>
            <h2>Sending Attachments as an E-mail</h2>
            <p>To send an e-mail with mixed content requires to set <b>Content-type</b> header to
               <b>multipart/mixed</b>. Then, text and attachment sections can be specified within <b>boundaries</b>.</p>
            <p>A boundary is started with two hyphens followed by a unique number, which cannot appear in the message
               part of the e-mail. A final boundary denoting the e-mail's final section must also end with two hyphens.
            </p>
            <p>Attached files should be encoded with the <b>pack("m")</b> function to have base64 encoding before
               transmission.</p>
            <h3>Example</h3>
            <p>Following is the example, which sends a file <b>/tmp/test.txt</b> as an attachment. Try it once &minus;
            </p>
            <pre class="prettyprint notranslate">
#!/usr/bin/python

import smtplib
import base64

filename = "/tmp/test.txt"

# Read a file and encode it into base64 format
fo = open(filename, "rb")
filecontent = fo.read()
encodedcontent = base64.b64encode(filecontent)  # base64

sender = 'webmaster@tutorialpoint.com'
reciever = 'amrood.admin@gmail.com'

marker = "AUNIQUEMARKER"

body ="""
This is a test email to send an attachement.
"""
# Define the main headers.
part1 = """From: From Person &lt;me@fromdomain.net&gt;
To: To Person &lt;amrood.admin@gmail.com&gt;
Subject: Sending Attachement
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary=%s
--%s
""" % (marker, marker)

# Define the message action
part2 = """Content-Type: text/plain
Content-Transfer-Encoding:8bit

%s
--%s
""" % (body,marker)

# Define the attachment section
part3 = """Content-Type: multipart/mixed; name=\"%s\"
Content-Transfer-Encoding:base64
Content-Disposition: attachment; filename=%s

%s
--%s--
""" %(filename, filename, encodedcontent, marker)
message = part1 + part2 + part3

try:
   smtpObj = smtplib.SMTP('localhost')
   smtpObj.sendmail(sender, reciever, message)
   print "Successfully sent email"
except Exception:
   print "Error: unable to send email"
</pre>
            <div class="mui-container-fluid button-borders show" id="bottom_navigation">
               <div class="pre-btn">
                  <a href="python_networking.html"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
               </div>
               <div class="nxt-btn">
                  <a href="python_multithreading.html">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
               </div>
            </div>
         </div>
      </div>
   </div>
   <footer id="footer">
      <div class="mui--text-center">
         <div class="mui--text-caption mui--text-light">
            <a href="../index.html">
               <img class="img-responsive" src="../images/logo-black.png" alt="Tutorials" title="Tutorials">
            </a>
         </div>
         <ul class="mui-list--inline mui--text-body2 mui--text-light">
            <li><a href="../about/index.html"><i class="fal fa-home"></i> About us</a></li>
            <li><a href="../about/about_terms_of_use.html"><i class="fal fa-asterisk"></i> Terms of use</a></li>
            <li><a href="../about/about_privacy.html"><i class="fal fa-globe"></i> Privacy Policy</a></li>
            <li><a href="../about/about_cookies.html"><i class="fal fa-question-circle"></i> Cookies Policy</a></li>
            <li><a href="../about/tutorials_writing.html"><i class="fal fa-hands-helping"></i> Write for us</a></li>
            <li><a href="../about/contact_us.html"><i class="fal fa-map-marker-alt"></i> Contact</a></li>
            <li><a href="../about/about_careers.html"><i class="fal fa-shield-check"></i> Careers</a></li>
         </ul>
         <div class="mui--text-caption mui--text-light bottom-copyright-text">&copy; Copyright 2020. All Rights
            Reserved.</div>
      </div>
   </footer>
</body>

</html>