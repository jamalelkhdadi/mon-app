<!DOCTYPE html>
<html lang="en-US">

<head>
   <title>HTML5 - IndexedDB - Tutorialspoint</title>
   <meta charset="utf-8">
   <meta name="description"
      content="HTML5 - IndexedDB - The indexeddb is a new HTML5 concept to store the data inside user's browser. indexeddb is more power than local storage and useful for applications that requir" />
   <meta name="keywords"
      content="C, C++, Python, Java, HTML, CSS, JavaScript, SQL, PHP, jQuery, XML, DOM, Bootstrap, Programming, examples, code" />
   <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes">
   <link rel="stylesheet" href="../style.css">
   <script src="../script.js"></script>
</head>

<body>
   <header id="header">
      <!-- Top main-menu Starts Here -->
      <div class="mui-appbar mui-container-fulid mui--appbar-line-height mui--z1" id="logo-menu">
         <div class="mui-container">
            <div class="left-menu">
               <img class="tp-logo" alt="tutorialspoint" src="../images/logo.png">
               <div class="mui-dropdown">
                  <a class="mui-btn mui-btn--primary categories" data-mui-toggle="dropdown">
                     <i class="fa fa-th-large"></i>
                     <span> HTML5 Tutorial <span class="mui-caret"></span></span>
                  </a>
                  <ul class="mui-dropdown__menu cat-menu">
                     <li>
                        <ul>
                           <li><a target="_top" href="index.html">01 - Home</a></li>
                           <li><a target="_top" href="overview.html">02 - Overview</a></li>
                           <li><a target="_top" href="syntax.html">03 - Syntax</a></li>
                           <li><a target="_top" href="attributes.html">04 - Attributes</a></li>
                           <li><a target="_top" href="events.html">05 - Events</a></li>
                           <li><a target="_top" href="web_forms2.html">06 - Web Forms 2.0</a></li>
                           <li><a target="_top" href="svg.html">07 - SVG</a></li>
                           <li><a target="_top" href="mathml.html">08 - MathML</a></li>
                           <li><a target="_top" href="web_storage.html">09 - Web Storage</a></li>
                           <li><a target="_top" href="web_sql.html">10 - Web SQL Database</a></li>
                           <li><a target="_top" href="server_sent_events.html">11 - Server-Sent Events</a></li>
                           <li><a target="_top" href="websocket.html">12 - WebSocket</a></li>
                           <li><a target="_top" href="canvas.html">13 - Canvas</a></li>
                           <li><a target="_top" href="audio_video.html">14 - Audio &amp; Video</a></li>
                           <li><a target="_top" href="geolocation.html">15 - Geolocation</a></li>
                           <li><a target="_top" href="microdata.html">16 - Microdata</a></li>
                           <li><a target="_top" href="drag_drop.html">17 - Drag &amp; drop</a></li>
                           <li><a target="_top" href="web_workers.html">18 - Web Workers</a></li>
                           <li><a target="_top" href="indexeddb.html">19 - IndexedDB</a></li>
                           <li><a target="_top" href="web_messaging.html">20 - Web Messaging</a></li>
                           <li><a target="_top" href="cors.html">21 - Web CORS</a></li>
                           <li><a target="_top" href="web_rtc.html">22 - Web RTC</a></li>
                        </ul>
                     </li>
                  </ul>
               </div>
               <div class="mui-dropdown">
                  <a class="mui-btn mui-btn--primary categories" data-mui-toggle="dropdown">
                     <i class="fa fa-th-large"></i>
                     <span> HTML5 Demo <span class="mui-caret"></span></span>
                  </a>
                  <ul class="mui-dropdown__menu cat-menu">
                     <li>
                        <ul>
                           <li><a target="_top" href="web_storage-demo.html">23 - Web Storage Demo</a></li>
                           <li><a target="_top" href="server_sent_events-demo.html">24 - Server SentEvents</a>
                           </li>
                           <li><a target="_top" href="canvas_demo.html">25 - Canvas Demo</a></li>
                           <li><a target="_top" href="audio_demo.html">26 - Audio Players Demo</a></li>
                           <li><a target="_top" href="video_demo.html">27 - Video Players Demo</a></li>
                           <li><a target="_top" href="geo_demo.html">28 - Geo-Location Demo</a></li>
                           <li><a target="_top" href="drag_demo.html">29 - Drag and Drop Demo</a></li>
                           <li><a target="_top" href="web_workers-demo.html">30 - Web Worker Demo</a></li>
                           <li><a target="_top" href="slide_desk-demo.html">31 - Web slide Desk Demo</a></li>
                        </ul>
                     </li>
                  </ul>
               </div>
               <div class="mui-dropdown">
                  <a class="mui-btn mui-btn--primary categories" data-mui-toggle="dropdown">
                     <i class="fa fa-th-large"></i>
                     <span> HTML5 Tools <span class="mui-caret"></span></span>
                  </a>
                  <ul class="mui-dropdown__menu cat-menu">
                     <li>
                        <ul>
                           <li><a target="_top" href="svg_tool.html">32 - SVG Generator </a></li>
                           <li><a target="_top" href="mathml-tool.html">33 - MathML Tool</a></li>
                           <li><a target="_top" href="velocity.html">34 - Velocity Draw </a></li>
                           <li><a target="_top" href="qr_code.html">35 - QR Code </a></li>
                           <li><a target="_top" href="validator.html">36 - Validator.nu Validation</a></li>
                           <li><a target="_top" href="modernizr.html">37 - Modernizr</a></li>
                           <li><a target="_top" href="validation.html">38 - Validation</a></li>
                           <li><a target="_top" href="online_editor.html">39 - Online Editor</a></li>
                           <li><a target="_top" href="color_code_builder.html">40 - Color Code Builder</a>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
               <div class=" mui-dropdown">
                  <a class="mui-btn mui-btn--primary categories" data-mui-toggle="dropdown">
                     <i class="fa fa-th-large"></i>
                     <span> HTML5 References <span class="mui-caret"></span></span>
                  </a>
                  <ul class="mui-dropdown__menu cat-menu">
                     <li>
                        <ul>
                           <li><a target="_top" href="color_names.html">41 - Color Names</a></li>
                           <li><a target="_top" href="fonts.html">42 - Fonts Reference</a></li>
                           <li><a target="_top" href="url_encoding.html">43 - UR Encoding</a></li>
                           <li><a target="_top" href="entities.html">44 - Entities</a></li>
                           <li><a target="_top" href="character_encodings.html">45 - Char Encodings</a></li>
                           <li><a target="_top" href="tags.html">46 - Tags Reference</a></li>
                           <li><a target="_top" href="deprecated_tags.html">47 - Deprecated Tags</a></li>
                           <li><a target="_top" href="new_tags.html">48 - New Tags</a></li>
                        </ul>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="right-menu">
               <a href="../index.html">
                  <button class="mui-btn mui-btn--primary mobile-menu">home</button>
               </a>
            </div>
         </div>
      </div>
      <!-- Top main-menu Ends Here jamal -->
   </header>
   <div class="mui-container-fluid content">
      <div class="mui-container">
         <!-- Tutorial Content Starts Here -->
         <div class="mui-col-md-12 tutorial-content">
            <div class="cover">
               <img class="img-responsive" src="../images/html5.jpg" alt="HTML5" />
            </div>
            <h1>HTML5 - IndexedDB</h1>
            <hr />
            <br>
            <p>The indexeddb is a new HTML5 concept to store the data inside user's browser. indexeddb is more power
               than local storage and useful for applications that requires to store large amount of the data. These
               applications can run more efficiency and load faster.</p>
            <h2>Why to use indexeddb?</h2>
            <p>The W3C has announced that the Web SQL database is a deprecated local storage specification so web
               developer should not use this technology any more. indexeddb is an alternative for web SQL data base and
               more effective than older technologies. </p>
            <h2>Features</h2>
            <ul class="list">
               <li>it stores key-pair values</li>
               <li>it is not a relational database</li>
               <li>IndexedDB API is mostly asynchronous</li>
               <li>it is not a structured query language</li>
               <li>it has supported to access the data from same domain</li>
            </ul>
            <h2>IndexedDB</h2>
            <p>Before enter into an indexeddb, we need to add some prefixes of implementation as shown below</p>
            <pre class="prettyprint notranslate">
window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || 
window.msIndexedDB;
 
window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || 
window.msIDBTransaction;
window.IDBKeyRange = window.IDBKeyRange || 
window.webkitIDBKeyRange || window.msIDBKeyRange
 
if (!window.indexedDB) {
   window.alert("Your browser doesn't support a stable version of IndexedDB.")
}
</pre>
            <h2>Open an IndexedDB database</h2>
            <p>Before creating a database, we have to prepare some data for the data base.let's start with company
               employee details.</p>
            <pre class="prettyprint notranslate">
const employeeData = [
   { id: "01", name: "Gopal K Varma", age: 35, email: "contact@tutorialspoint.com" },
   { id: "02", name: "Prasad", age: 24, email: "prasad@tutorialspoint.com" }
];
</pre>
            <h2>Adding the data</h2>
            <p>Here adding some data manually into the data as shown below &minus;</p>
            <pre class="prettyprint notranslate">
function add() {
   var request = db.transaction(["employee"], "readwrite")
   .objectStore("employee")
   .add({ id: "01", name: "prasad", age: 24, email: "prasad@tutorialspoint.com" });
   
   request.onsuccess = function(event) {
      alert("Prasad has been added to your database.");
   };
   
   request.onerror = function(event) {
      alert("Unable to add data\r\nPrasad is already exist in your database! ");
   }
}
</pre>
            <h2>Retrieving Data</h2>
            <p>We can retrieve the data from the data base using with get()</p>
            <pre class="prettyprint notranslate">
function read() {
   var transaction = db.transaction(["employee"]);
   var objectStore = transaction.objectStore("employee");
   var request = objectStore.get("00-03");
   
   request.onerror = function(event) {
      alert("Unable to retrieve daa from database!");
   };
   
   request.onsuccess = function(event) {
      
      if(request.result) {
         alert("Name: " + request.result.name + ", Age: 
            " + request.result.age + ", Email: " + request.result.email);
      } else {
         alert("Kenny couldn't be found in your database!");  
      }
   };
}
</pre>
            <p>Using with get(), we can store the data in object instead of that we can store the data in cursor and we
               can retrieve the data from cursor.</p>
            <pre class="prettyprint notranslate">
function readAll() {
   var objectStore = db.transaction("employee").objectStore("employee");
   
   objectStore.openCursor().onsuccess = function(event) {
      var cursor = event.target.result;
      
      if (cursor) {
         alert("Name for id " + cursor.key + " is " + cursor.value.name + ", 
            Age: " + cursor.value.age + ", Email: " + cursor.value.email);
         cursor.continue();
      } else {
         alert("No more entries!");
      }
   };
}
</pre>
            <h2>Removing the data</h2>
            <p>We can remove the data from IndexedDB with remove().Here is how the code looks like</p>
            <pre class="prettyprint notranslate">
function remove() {
   var request = db.transaction(["employee"], "readwrite")
   .objectStore("employee")
   .delete("02");
   
   request.onsuccess = function(event) {
      alert("prasad entry has been removed from your database.");
   };
}
</pre>
            <h2>HTML Code</h2>
            <p>To show all the data we need to use onClick event as shown below code &minus;</p>
            <pre class="prettyprint notranslate">
&lt;!DOCTYPE html&gt;

&lt;html&gt;
   &lt;head&gt;
      &lt;meta http-equiv = "Content-Type" content = "text/html; charset = utf-8" /&gt;
      &lt;title&gt;IndexedDb Demo | onlyWebPro.com&lt;/title&gt;
   &lt;/head&gt;
   
   &lt;body&gt;
      &lt;button onclick = "read()"&gt;Read &lt;/button&gt;
      &lt;button onclick = "readAll()"&gt;&lt;/button&gt;
      &lt;button onclick = "add()"&gt;&lt;/button&gt;
      &lt;button onclick = "remove()"&gt;Delete &lt;/button&gt;
   &lt;/body&gt;
&lt;/html&gt;
</pre>
            <p>The final code should be as &minus;</p>
            <pre class="prettyprint notranslate">
&lt;!DOCTYPE html&gt;

&lt;html&gt;
   &lt;head&gt;
      &lt;meta http-equiv = "Content-Type" content = "text/html; charset = utf-8" /&gt;
      &lt;script type = "text/javascript"&gt;
         
         //prefixes of implementation that we want to test
         window.indexedDB = window.indexedDB || window.mozIndexedDB || 
         window.webkitIndexedDB || window.msIndexedDB;
         
         //prefixes of window.IDB objects
         window.IDBTransaction = window.IDBTransaction || 
         window.webkitIDBTransaction || window.msIDBTransaction;
         window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || 
         window.msIDBKeyRange
         
         if (!window.indexedDB) {
            window.alert("Your browser doesn't support a stable version of IndexedDB.")
         }
         
         const employeeData = [
            { id: "00-01", name: "gopal", age: 35, email: "gopal@tutorialspoint.com" },
            { id: "00-02", name: "prasad", age: 32, email: "prasad@tutorialspoint.com" }
         ];
         var db;
         var request = window.indexedDB.open("newDatabase", 1);
         
         request.onerror = function(event) {
            console.log("error: ");
         };
         
         request.onsuccess = function(event) {
            db = request.result;
            console.log("success: "+ db);
         };
         
         request.onupgradeneeded = function(event) {
            var db = event.target.result;
            var objectStore = db.createObjectStore("employee", {keyPath: "id"});
            
            for (var i in employeeData) {
               objectStore.add(employeeData[i]);
            }
         }
         
         function read() {
            var transaction = db.transaction(["employee"]);
            var objectStore = transaction.objectStore("employee");
            var request = objectStore.get("00-03");
            
            request.onerror = function(event) {
               alert("Unable to retrieve daa from database!");
            };
            
            request.onsuccess = function(event) {
               // Do something with the request.result!
               if(request.result) {
                  alert("Name: " + request.result.name + ", 
                     Age: " + request.result.age + ", Email: " + request.result.email);
               } else {
                  alert("Kenny couldn't be found in your database!");
               }
            };
         }
         
         function readAll() {
            var objectStore = db.transaction("employee").objectStore("employee");
            
            objectStore.openCursor().onsuccess = function(event) {
               var cursor = event.target.result;
               
               if (cursor) {
                  alert("Name for id " + cursor.key + " is " + cursor.value.name + ", 
                     Age: " + cursor.value.age + ", Email: " + cursor.value.email);
                  cursor.continue();
               } else {
                  alert("No more entries!");
               }
            };
         }
         
         function add() {
            var request = db.transaction(["employee"], "readwrite")
            .objectStore("employee")
            .add({ id: "00-03", name: "Kenny", age: 19, email: "kenny@planet.org" });
            
            request.onsuccess = function(event) {
               alert("Kenny has been added to your database.");
            };
            
            request.onerror = function(event) {
               alert("Unable to add data\r\nKenny is aready exist in your database! ");
            }
         }
         
         function remove() {
            var request = db.transaction(["employee"], "readwrite")
            .objectStore("employee")
            .delete("00-03");
            
            request.onsuccess = function(event) {
               alert("Kenny's entry has been removed from your database.");
            };
         }
      &lt;/script&gt;
      
   &lt;/head&gt;
   &lt;body&gt;
      &lt;button onclick = "read()"&gt;Read &lt;/button&gt;
      &lt;button onclick = "readAll()"&gt;Read all &lt;/button&gt;
      &lt;button onclick = "add()"&gt;Add data &lt;/button&gt;
      &lt;button onclick = "remove()"&gt;Delete data &lt;/button&gt;
   &lt;/body&gt;
&lt;/html&gt;
</pre>
            <p>It will produce the following output &minus;</p>
            <iframe onload="resizeFrame(this)" class="result" src="/html5/src/indexeddb.htm" height="100px"
               width="660px"></iframe>
            <div class="mui-container-fluid button-borders show" id="bottom_navigation">
               <div class="pre-btn">
                  <a href="web_workers.html"><i class="fal fa-chevron-circle-left"></i> Previous Page</a>
               </div>
               <div class="nxt-btn">
                  <a href="web_messaging.html">Next Page <i class="fal fa-chevron-circle-right"></i>&nbsp;</a>
               </div>
            </div>
         </div>
      </div>
   </div>
   <footer id="footer">
      <div class="mui--text-center">
         <div class="mui--text-caption mui--text-light">
            <a href="../index.html">
               <img class="img-responsive" src="../images/logo-black.png" alt="Tutorials" title="Tutorials">
            </a>
         </div>
         <ul class="mui-list--inline mui--text-body2 mui--text-light">
            <li><a href="../about/index.html"><i class="fal fa-home"></i> About us</a></li>
            <li><a href="../about/about_terms_of_use.html"><i class="fal fa-asterisk"></i> Terms of use</a></li>
            <li><a href="../about/about_privacy.html"><i class="fal fa-globe"></i> Privacy Policy</a></li>
            <li><a href="../about/about_cookies.html"><i class="fal fa-question-circle"></i> Cookies Policy</a></li>
            <li><a href="../about/tutorials_writing.html"><i class="fal fa-hands-helping"></i> Write for us</a></li>
            <li><a href="../about/contact_us.html"><i class="fal fa-map-marker-alt"></i> Contact</a></li>
            <li><a href="../about/about_careers.html"><i class="fal fa-shield-check"></i> Careers</a></li>
         </ul>
         <div class="mui--text-caption mui--text-light bottom-copyright-text">&copy; Copyright 2020. All Rights
            Reserved.</div>
      </div>
   </footer>
</body>

</html>